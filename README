This is about the simplest reduction you can get for using eio_custom.

Unfortunately, it blows up on Solaris, and I can't seem to figure out why.

To run:

    node-waf configure build && node test.js

Macs and Linux are like:

    js 0 before hello
          >>>DoSomethingAsync 1 2 hello
          >>>about to eio_custom, sr=6438576
          >>>returning
          >>>DoSomething 6438608,6438576
          >>>sr pointer 6438576
          >>>about to sleep
          >>>read req, about to set result
          >>>x 1
          >>>y 2
          >>>returning
          >>>DoSomething_After 6438608
    js 2016 null 3 hello


But solaris is all:

    js 0 before hello
          >>>DoSomethingAsync 1 2 hello
          >>>about to eio_custom, sr=138834904
          >>>returning
          >>>DoSomething 139241808,1024
          >>>sr pointer 1024
          >>>about to sleep
          >>>read req, about to set result
    Segmentation Fault (core dumped)

Take a look again.  Note that the req->data pointer is getting set from
some big number which corresponds to a valid memory location assigned
by malloc, to 1024, which isn't valid at all.

